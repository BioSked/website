---
import { cn } from "@/lib/utils";
import { NavbarActions } from "@/components/layout/NavbarActions"
import { currentLocale } from 'astro:i18n';
import { useTranslations } from "@/i18n/i18n";
import { NAV_LINKS } from "@/consts";

interface Props {
    currentPage: string;
}
const { currentPage } = Astro.props;

const pathname = currentPage?.replace(/\/$/, '') || '';

const hideNavbar = ['/signin', '/signup', '/docs', '/not-found', '/forgot-password'].some((route) => 
    pathname.includes(route)
);

// Translate link labels
const t = useTranslations(Astro.currentLocale);
const navLinks = NAV_LINKS.map(link => ({
    ...link,
    label: t(link.label),
    alt: t(link.alt),
    subitems: link.subitems ? link.subitems.map(subitem => ({
        ...subitem,
        label: t(subitem.label),
        alt: t(subitem.alt),
    })) : link.subitems
}));

---

{!hideNavbar && (
    <NavbarActions client:idle pathname={pathname} pagename={Astro.url.pathname} navLinks={navLinks}/>
)}